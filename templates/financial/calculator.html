{% extends 'financial/base.html' %}

{% block title %}Financial Calculators - FinanceAI{% endblock %}

{% block content %}
<h1>ðŸ§® Financial Calculators</h1>
<p>Use our advanced financial calculators to plan your financial future with confidence.</p>

<div style="margin-top: 2rem;">
    <--help Compound Interest Calculator -->
    <div style="background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%); padding: 2rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; margin-bottom: 2rem;">
        <h2 style="margin-top: 0;">ðŸ’¹ Compound Interest Calculator</h2>
        <p style="color: #6b7280;">Calculate how your investment grows with compound interest over time.</p>
        
        <div class="grid-2">
            <div>
                <div class="input-group">
                    <label for="principal">Principal Amount ($)</label>
                    <input type="number" id="principal" placeholder="Initial investment" step="0.01" min="0">
                </div>
                <div class="input-group">
                    <label for="rate">Annual Interest Rate (%)</label>
                    <input type="number" id="rate" placeholder="e.g., 7.5" step="0.01" min="0">
                </div>
                <div class="input-group">
                    <label for="time">Years</label>
                    <input type="number" id="time" placeholder="Investment period" step="0.1" min="0">
                </div>
                <button onclick="calculateCompoundInterest()" style="width: 100%;">Calculate</button>
            </div>
            <div>
                <div class="result" id="ciResult">
                    <h3 style="margin-top: 0;">Results</h3>
                    <div class="result-item">
                        <span class="result-label">Final Amount</span>
                        <span class="result-value" id="ciAmount">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Interest Earned</span>
                        <span class="result-value" id="ciInterest">$0.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <--help Loan Calculator -->
    <div style="background: linear-gradient(135deg, #dbeafe 0%, #f3e8ff 100%); padding: 2rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; margin-bottom: 2rem;">
        <h2 style="margin-top: 0;">ðŸ’³ Loan Payment Calculator</h2>
        <p style="color: #6b7280;">Calculate your monthly loan payment and total interest paid.</p>
        
        <div class="grid-2">
            <div>
                <div class="input-group">
                    <label for="loanAmount">Loan Amount ($)</label>
                    <input type="number" id="loanAmount" placeholder="Total loan amount" step="0.01" min="0">
                </div>
                <div class="input-group">
                    <label for="loanRate">Annual Interest Rate (%)</label>
                    <input type="number" id="loanRate" placeholder="e.g., 4.5" step="0.01" min="0">
                </div>
                <div class="input-group">
                    <label for="loanTerm">Loan Term (Years)</label>
                    <input type="number" id="loanTerm" placeholder="e.g., 30" step="1" min="1">
                </div>
                <button onclick="calculateLoan()" style="width: 100%;">Calculate Payment</button>
            </div>
            <div>
                <div class="result" id="loanResult">
                    <h3 style="margin-top: 0;">Results</h3>
                    <div class="result-item">
                        <span class="result-label">Monthly Payment</span>
                        <span class="result-value" id="monthlyPayment">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Interest</span>
                        <span class="result-value" id="totalInterest">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Cost</span>
                        <span class="result-value" id="totalCost">$0.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <--help Investment Growth Calculator -->
    <div style="background: linear-gradient(135deg, #dcfce7 0%, #dbeafe 100%); padding: 2rem; border-radius: 0.75rem; border: 1px solid #e5e7eb;">
        <h2 style="margin-top: 0;">ðŸ“ˆ Investment Growth Calculator</h2>
        <p style="color: #6b7280;">Project your investment growth with regular contributions.</p>
        
        <div class="grid-2">
            <div>
                <div class="input-group">
                    <label for="initialInv">Initial Investment ($)</label>
                    <input type="number" id="initialInv" placeholder="Starting amount" step="0.01" min="0">
                </div>
                <div class="input-group">
                    <label for="monthlyContrib">Monthly Contribution ($)</label>
                    <input type="number" id="monthlyContrib" placeholder="Regular savings" step="0.01" min="0">
                </div>
                <div class="input-group">
                    <label for="annualReturn">Expected Annual Return (%)</label>
                    <input type="number" id="annualReturn" placeholder="e.g., 8" step="0.1" min="0">
                </div>
                <div class="input-group">
                    <label for="investYears">Years</label>
                    <input type="number" id="investYears" placeholder="Investment period" step="0.1" min="0">
                </div>
                <button onclick="calculateInvestment()" style="width: 100%;">Calculate Growth</button>
            </div>
            <div>
                <div class="result" id="investResult">
                    <h3 style="margin-top: 0;">Results</h3>
                    <div class="result-item">
                        <span class="result-label">Total Invested</span>
                        <span class="result-value" id="totalInvested">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Gain</span>
                        <span class="result-value" id="totalGain">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Final Amount</span>
                        <span class="result-value" id="finalAmount">$0.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
async function calculateCompoundInterest() {
    const principal = parseFloat(document.getElementById('principal').value) || 0;
    const rate = parseFloat(document.getElementById('rate').value) || 0;
    const time = parseFloat(document.getElementById('time').value) || 0;
    
    if (principal <= 0 || rate < 0 || time <= 0) {
        alert('Please enter valid values');
        return;
    }
    
    const amount = principal * Math.pow(1 + rate / 100, time);
    const interest = amount - principal;
    
    document.getElementById('ciAmount').textContent = '$' + amount.toFixed(2);
    document.getElementById('ciInterest').textContent = '$' + interest.toFixed(2);
    document.getElementById('ciResult').classList.add('show');
}

async function calculateLoan() {
    const loanAmount = parseFloat(document.getElementById('loanAmount').value) || 0;
    const loanRate = parseFloat(document.getElementById('loanRate').value) || 0;
    const loanTerm = parseFloat(document.getElementById('loanTerm').value) || 0;
    
    if (loanAmount <= 0 || loanRate < 0 || loanTerm <= 0) {
        alert('Please enter valid values');
        return;
    }
    
    const monthlyRate = loanRate / 100 / 12;
    const numberOfPayments = loanTerm * 12;
    const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
    const totalPaid = monthlyPayment * numberOfPayments;
    const totalInt = totalPaid - loanAmount;
    
    document.getElementById('monthlyPayment').textContent = '$' + monthlyPayment.toFixed(2);
    document.getElementById('totalInterest').textContent = '$' + totalInt.toFixed(2);
    document.getElementById('totalCost').textContent = '$' + totalPaid.toFixed(2);
    document.getElementById('loanResult').classList.add('show');
}

async function calculateInvestment() {
    const initialInv = parseFloat(document.getElementById('initialInv').value) || 0;
    const monthlyContrib = parseFloat(document.getElementById('monthlyContrib').value) || 0;
    const annualReturn = parseFloat(document.getElementById('annualReturn').value) || 0;
    const investYears = parseFloat(document.getElementById('investYears').value) || 0;
    
    if (initialInv < 0 || monthlyContrib < 0 || annualReturn < 0 || investYears <= 0) {
        alert('Please enter valid values');
        return;
    }
    
    const months = investYears * 12;
    const monthlyRate = annualReturn / 100 / 12;
    
    let balance = initialInv;
    const totalContributed = initialInv + (monthlyContrib * months);
    
    for (let i = 0; i < months; i++) {
        balance = balance * (1 + monthlyRate) + monthlyContrib;
    }
    
    const totalGain = balance - totalContributed;
    
    document.getElementById('totalInvested').textContent = '$' + totalContributed.toFixed(2);
    document.getElementById('totalGain').textContent = '$' + totalGain.toFixed(2);
    document.getElementById('finalAmount').textContent = '$' + balance.toFixed(2);
    document.getElementById('investResult').classList.add('show');
}
</script>
{% endblock %}
